#!/usr/bin/env zsh
#
# This script will be evaluated before `rcup` starts.

. $(dirname "$0")/../scripts/lib/prompt.sh
. $(dirname "$0")/../scripts/lib/utils.sh

if [[ ! -d ~/bin ]]; then
  mkdir ~/bin
fi

# Link vi to nvim.
nvim_path="$(which nvim)"
is_link ~/bin/vi "$nvim_path" || create_link ~/bin/vi "$nvim_path"

if [ -f ~/.gitconfig -a "$(readlink ~/.gitconfig)" != "$(ls -d ~)/.dotfiles/gitconfig" ]; then
  info '~/.gitconfig exists, append its content to ~/.dotfiles/gitconfig'
  cat ~/.gitconfig >>~/.dotfiles/gitconfig
fi

# Required by tmux.conf
check_and_install_executable bc || exit $?

# Required by asdf-ruby
../scripts/install_ruby_dependencies.sh

# Required by asdf-java
check_and_install_executable jq || exit $?

../scripts/setup_asdf.sh
